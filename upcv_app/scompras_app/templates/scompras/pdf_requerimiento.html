{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Requerimiento PDF</title>


  <style>
    /* Fuente personalizada para todo el documento */
    body, html {
      font-family: 'Arial', sans-serif; /* Aquí puedes cambiar a la fuente que desees */
    }

    /* Eliminar márgenes en el body y html para reducir el espacio de la hoja */
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }

    /* Establecer márgenes para la página de impresión (PDF) */
    @page {
      margin: 10mm;
    }

    /* Ajustar la sección principal de la página */
    .card-body {
      margin: 0;
      padding: 0;
    }

    /* Eliminar márgenes y rellenos en la tabla */
    table {
      margin: 0;
      padding: 0;
      width: 100%;
    }

    /* Estilo de los encabezados de la tabla */
    th, td {
      border: 1px solid #000;
      padding: 4px;
      text-align: left;
    }

    /* Estilo para los logos */
    .logo-row {
      display: flex;
      justify-content: center; 
      align-items: center;
      margin: 0;
    }

    .logo-row img {
      max-height: 60px;
      height: auto;
      width: auto;
      margin: 0 10px;
    }

    /* Estilo de los detalles de la institución */
    .institucion-info {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }

    .institucion-info div {
      width: 32%;
      font-size: 10px;
    }

    /* Ajuste de las columnas dentro de la invoice */
    .invoice-details {
      margin-bottom: 10px;
      color: black;
    }

    .invoice-details p {
      margin: 0;
      padding: 0;
    }

    /* Flexbox para las filas */
    .row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .col-sm-6 {
      flex: 1 1 45%;
    }

    @media (max-width: 768px) {
      .col-sm-6 {
        flex: 1 1 100%;
      }
    }

    /* Estilo para los detalles de la tabla */
    .small-header {
      font-size: 9px;
      padding: 3px;
      text-align: center;
    }

    .descripcion-header {
      font-size: 10px;
      text-align: center;
      padding: 10px;
    }

    .small-cell {
      font-size: 10px;
      padding: 2px;
      text-align: center;
    }

    .descripcion-Articulo {
      font-size: 11px;
      white-space: normal;
      word-wrap: break-word;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 180px;
      text-align: center;
    }

    /* Ajuste de firma */
    .firmas {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
      font-size: 10px;
    }

    .firmas div {
      width: 32%;
      text-align: center;
    }
  </style>

</head>
<body>

{% comment %} <!-- Logos arriba -->
<div class="logo-row">
  <img src="{{ institucion.logo.url }}" alt="Logo 1">
  <img src="{{ institucion.logo2.url }}" alt="Logo 2">
</div> {% endcomment %}
  <br>  <br>  <br>  <br>  <br>  <br>  <br>


<div class="card-body pt-10 mt-10">  <!-- Quitado 'border-top' -->
<!-- Línea con nombre del Departamento centrado -->
<p style="text-align: center; font-size: 14px; color: #0b2a4a; border-top: 0.5px solid #0b2a4a; margin: 4px 0 8px 0;">
  <strong>{{ requerimiento.departamento.nombre }}</strong>
</p>

<!-- Tabla con información del requerimiento y motivo -->
<table style="width: 100%; border-collapse: collapse; font-size: 12px; table-layout: fixed;">
  <tr style="border-bottom: 0.5px solid #0b2a4a;">
    <th style="width: 15%; text-align: left; padding: 6px; background-color: #717172ff; color: white; border: 1px solid #0b2a4a;">
      Elaborado Por:
    </th>
    <td style="padding: 6px; border: 1px solid #0b2a4a; overflow-wrap: break-word; width: 35%;">
      {{ requerimiento.creado_por.get_full_name }}
    </td>

    <th style="width: 6%; text-align: left; padding: 6px; background-color: #717172ff; color: white; border: 1px solid #0b2a4a;">
      Fecha:
    </th>
    <td style="padding: 3px; border: 1px solid #0b2a4a; width: 17%;">
      {{ requerimiento.fecha_creacion|date:"d \d\e F \d\e Y" }}
    </td>
{% if requerimiento.estado != 'pendiente' %}
<th style="width: 6%; text-align: left; padding: 6px; background-color: #717172ff; color: white; border: 1px solid #0b2a4a;">
  Estado:
</th>
{% else %}
<th style="width: 6%; text-align: left; padding: 6px; background-color: #717172ff; color: #717172ff; border: 1px solid #0b2a4a;">
  Estado:
</th>
{% endif %}

    <td style="padding: 6px; border: 1px solid #0b2a4a; overflow-wrap: break-word;">
      {% if requerimiento.estado != 'pendiente' %}
        {{ requerimiento.get_estado_display }}
      {% else %}
        <!-- Dejar vacío pero mantener estructura -->
      {% endif %}
    </td>
  </tr>

  {% if requerimiento.motivo %}
  <tr>
    <th colspan="1" style="text-align: left; padding: 6px; color: white; border: 1px solid #0b2a4a; background-color: #717172ff;">
      Motivo de la Solicitud:
    </th>
    <td colspan="5" style="padding: 6px; border: 1px solid #0b2a4a; word-wrap: break-word; overflow-wrap: break-word;">
      {{ requerimiento.motivo }}
    </td>
  </tr>
  {% endif %}
</table>






<br>
<style>
  table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    border-radius: 10px;
    overflow: hidden;
  }
  th, td {
    padding: 12px;
    text-align: left;
    border: 0.51px solid #0b2a4a;
  }
  th {
    background-color: #0b2a4a;
    color: white;
  }
  tr:nth-child(even) {
    background-color: 
  }
  tr:hover {
    background-color: #ddd;
  }
</style>



  <!-- Detalles de la tabla con el nuevo formato -->
  <div class="table-responsive invoice-table mb-4 ">
    <table class="table table ">
      <thead>
        <tr>
          <th class="small-header">Cantidad Solicitada</th>
          <th class="small-header">Unidad de Medida</th>
          <th class="descripcion-header">Descripción</th>
          <th class="small-header">Cantidad Despachada</th>
        </tr>
      </thead>
      <tbody>
        {% for detalle in detalles_requerimiento %}
         <tr>
  <td class="small-cell">{{ detalle.cantidad }}</td>
  <td class="small-cell">{{ detalle.articulo.unidad_medida }}</td>
  <td class="descripcion-Articulo">{{ detalle.articulo.nombre }}</td>
  <td class="small-cell">
    {% if requerimiento.estado != 'pendiente' %}
      {{ detalle.cantidad_despachada }}
    {% endif %}
  </td>
</tr>

        {% empty %}
          <tr>
            <td colspan="4">No hay detalles registrados.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>



</body>


<!-- Firmas -->


<!-- Primera línea de firmas -->
<div class="firmas" style="text-align: center; padding-bottom: 25px; margin-right: 30px; font-size: 13px; position: fixed; bottom: 130px; width: 100%; left: 0;">
  <div>_______________________________<br><strong>Elaborado Por</strong></div>
  <div style="margin-top: -15px;">_________________________________<br><strong>Jefe Departamento y/o Sección</strong></div>
  <div>_________________________<br><strong>Recibí Conforme</strong></div>
</div>

<!-- Segunda línea de firmas -->
<div class="firmas" style="text-align: center; padding-bottom: 5px; margin-right: 30px; font-size: 13px; position: fixed; bottom: 1px; width: 100%; left: 0;">
  <div>_______________________________<br><strong>Departamento Financiero</strong></div>
  <div style="margin-top: -15px;">_________________________<br><strong>Vo. Bo. Coordinación</strong></div>
  <div>_________________________<br><strong>Entrega Sección de Almacén</strong></div>
</div>


{% comment %} 
<!-- Información de la institución abajo -->
<div class="institucion-info" style="display: flex; justify-content: space-between; align-items: center; width: 100%; border-top: 5px solid transparent; padding: 0.5px; position: fixed; bottom: 0; background-color: white; padding-top: 10px;">
  
  <!-- Línea de colores azul, blanco y azul (menos degradado) -->
  <div style="position: absolute; top: -10px; left: 0; width: 100%; height: 5px; 
    background: linear-gradient(to right, #0b2a4a 33%, #ffffff 33%, #ffffff 66%, #0b2a4a 66%);
    border: 0.3px solid #000;">
  </div>
  
  <div style="display: flex; align-items: center; flex: 1;">
    <!-- Reemplaza con tu imagen de página web en formato JPG -->
    <img src="{% static 'assets/images/globo.png' %}" style="margin-right: 8px; width: 20px; height: 20px;">
    <span style="; font-size: 11px; font-weight: bold;">{% if institucion.pagina_web %}{{ institucion.pagina_web|slice:"7:" }}{% endif %}</span>
  </div>
  
  <div style="display: flex; align-items: center; flex: 1;">
    <!-- Reemplaza con tu imagen de teléfono antiguo en formato JPG -->
    <img src="{% static 'assets/images/telefono.png' %}" alt="Teléfono" style="margin-right: 8px; width: 20px; height: 20px;">
    <span style="font-size: 11px; font-weight: bold;">{{ institucion.telefono }}</span>
  </div>
  
  <div style="display: flex; align-items: center; flex: 1;">
    <!-- Reemplaza con tu imagen font-size: 13pxde ubicación en formato JPG -->
    <img src="{% static 'assets/images/posicion.png' %}" alt="Ubicación" style="margin-right: 8px; width: 20px; height: 20px;">
    <span style="font-size: 11px; font-weight: bold;">{{ institucion.direccion }}</span>
  </div>
  
</div> {% endcomment %}




</html>
